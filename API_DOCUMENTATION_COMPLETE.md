# BestGoods API æ–‡æ¡£ - å®Œæ•´ç‰ˆ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›BestGoodsç³»ç»Ÿçš„å®Œæ•´APIæ¥å£è¯´æ˜ï¼ŒåŒ…æ‹¬æ‰€æœ‰å¯ç”¨çš„HTTPç«¯ç‚¹ã€è¯·æ±‚å‚æ•°ã€å“åº”æ ¼å¼å’Œé”™è¯¯å¤„ç†ã€‚

## ğŸ”Œ APIåŸºç¡€ä¿¡æ¯

### åŸºç¡€URL
```
http://localhost:3000
```

### å“åº”æ ¼å¼
æ‰€æœ‰APIå“åº”éƒ½ä½¿ç”¨JSONæ ¼å¼ï¼š
```json
{
  "success": true,
  "data": {},
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### é”™è¯¯å“åº”
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "é”™è¯¯æè¿°"
  },
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### çŠ¶æ€ç 
| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

## ğŸ“Š å…¬å…±API

### 1. å¥åº·æ£€æŸ¥
æ£€æŸ¥æœåŠ¡å™¨å’Œæ•°æ®åº“çŠ¶æ€ã€‚

**ç«¯ç‚¹**: `GET /health`

**è¯·æ±‚å‚æ•°**: æ— 

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "status": "healthy",
    "database": "connected",
    "memory": {
      "rss": "125.6 MB",
      "heapTotal": "45.2 MB",
      "heapUsed": "32.8 MB"
    },
    "uptime": "5åˆ†32ç§’",
    "timestamp": "2026-02-20T11:17:00.000Z"
  },
  "message": "æœåŠ¡å™¨è¿è¡Œæ­£å¸¸",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 2. è·å–ç»Ÿè®¡æ•°æ®
è·å–ç³»ç»Ÿçš„ç»Ÿè®¡æ•°æ®ã€‚

**ç«¯ç‚¹**: `GET /api/stats`

**è¯·æ±‚å‚æ•°**: æ— 

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "categories": {
      "level1": 49,
      "level2": 3270,
      "level3": 195651
    },
    "products": {
      "total": 4580,
      "brands": 14
    },
    "lastUpdated": "2026-02-20T11:17:00.000Z"
  },
  "message": "ç»Ÿè®¡æ•°æ®è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 3. è·å–åˆ†ç±»æ ‘
è·å–å®Œæ•´çš„åˆ†ç±»æ ‘ç»“æ„ã€‚

**ç«¯ç‚¹**: `GET /api/categories/tree`

**è¯·æ±‚å‚æ•°**: æ— 

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "ä¸ªæŠ¤å¥åº·": {
      "children": {
        "å£è…”æŠ¤ç†": {
          "items": ["ç”µåŠ¨ç‰™åˆ·", "å†²ç‰™å™¨", "ç‰™çº¿æ£’", ...],
          "count": 65
        },
        "å‰ƒé¡»ç”¨å“": {
          "items": ["ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€", "ä¸“ä¸šç†å‘æ¨å‰ª", ...],
          "count": 9
        }
      },
      "count": 38
    },
    "å®¶å±…ç”Ÿæ´»": {
      "children": { ... },
      "count": 91
    }
  },
  "message": "åˆ†ç±»æ ‘è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 4. æœç´¢åˆ†ç±»
æœç´¢åˆ†ç±»æ•°æ®ã€‚

**ç«¯ç‚¹**: `GET /api/categories/search`

**è¯·æ±‚å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `q` | string | æ˜¯ | æœç´¢å…³é”®è¯ |
| `limit` | number | å¦ | è¿”å›ç»“æœæ•°é‡ï¼Œé»˜è®¤100 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "query": "å‰ƒé¡»",
    "total": 15,
    "results": [
      {
        "level1": "ä¸ªæŠ¤å¥åº·",
        "level2": "å‰ƒé¡»ç”¨å“",
        "level3": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€"
      },
      {
        "level1": "ä¸ªæŠ¤å¥åº·",
        "level2": "å‰ƒé¡»ç”¨å“",
        "level3": "ä¸“ä¸šç†å‘æ¨å‰ª"
      }
    ]
  },
  "message": "æœç´¢å®Œæˆ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

## ğŸ  é¦–é¡µç›¸å…³API

### 1. è·å–é¦–é¡µæ•°æ®
è·å–é¦–é¡µæ‰€éœ€çš„æ‰€æœ‰æ•°æ®ã€‚

**ç«¯ç‚¹**: `GET /api/home`

**è¯·æ±‚å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `level1` | string | å¦ | ä¸€çº§åˆ†ç±»ç­›é€‰ |
| `level2` | string | å¦ | äºŒçº§åˆ†ç±»ç­›é€‰ |
| `search` | string | å¦ | æœç´¢å…³é”®è¯ |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "stats": {
      "level1": 49,
      "level2": 3270,
      "level3": 195651,
      "products": 4580,
      "brands": 14
    },
    "currentLevel1": "ä¸ªæŠ¤å¥åº·",
    "currentLevel2": "å£è…”æŠ¤ç†",
    "level1List": ["ä¸ªæŠ¤å¥åº·", "å®¶å±…ç”Ÿæ´»", "æ•°ç ç”µå­", ...],
    "level2List": [
      {
        "name": "å£è…”æŠ¤ç†",
        "count": 65,
        "active": true
      },
      {
        "name": "å‰ƒé¡»ç”¨å“",
        "count": 9,
        "active": false
      }
    ],
    "level3Items": [
      {
        "name": "ç”µåŠ¨ç‰™åˆ·",
        "hasData": true,
        "url": "/category/ä¸ªæŠ¤å¥åº·/å£è…”æŠ¤ç†/ç”µåŠ¨ç‰™åˆ·"
      },
      {
        "name": "å†²ç‰™å™¨",
        "hasData": false,
        "url": null
      }
    ],
    "searchResults": []
  },
  "message": "é¦–é¡µæ•°æ®è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

## ğŸ“„ è¯¦æƒ…é¡µç›¸å…³API

### 1. è·å–è¯¦æƒ…é¡µæ•°æ®
è·å–å•†å“è¯¦æƒ…é¡µæ•°æ®ã€‚

**ç«¯ç‚¹**: `GET /api/category/:level1/:level2/:level3`

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `level1` | string | æ˜¯ | ä¸€çº§åˆ†ç±»åç§° |
| `level2` | string | æ˜¯ | äºŒçº§åˆ†ç±»åç§° |
| `level3` | string | æ˜¯ | ä¸‰çº§åˆ†ç±»åç§° |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "category": {
      "level1": "ä¸ªæŠ¤å¥åº·",
      "level2": "å‰ƒé¡»ç”¨å“",
      "level3": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€"
    },
    "products": [
      {
        "id": 1,
        "product_name": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€ ä½³æ´å£«æ¬¾",
        "brand_name": "ä½³æ´å£«",
        "price": "12.50",
        "confidence_score": 89,
        "selection_reason": "åŸºäºç”¨æˆ·è¯„ä»·ã€äº§å“è´¨é‡å’Œæ€§ä»·æ¯”ç»¼åˆè¯„é€‰",
        "priceId": 1,
        "dimensionId": 1,
        "likes": 0,
        "dislikes": 0
      }
    ],
    "priceIntervals": [
      {
        "id": 1,
        "name": "ç»æµå‹",
        "range": "Â¥5-Â¥15",
        "description": "é€‚åˆé¢„ç®—æœ‰é™ã€ä¸´æ—¶ä½¿ç”¨æˆ–å­¦ç”Ÿç¾¤ä½“",
        "marketShare": "40%"
      }
    ],
    "evaluationDimensions": [
      {
        "id": 1,
        "name": "æ€§ä»·æ¯”æœ€é«˜",
        "description": "åœ¨ä»·æ ¼å’Œæ€§èƒ½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡",
        "icon": "percentage"
      }
    ],
    "comments": [
      {
        "id": "comment_123",
        "user": "åŒ¿åç”¨æˆ·",
        "timestamp": "2026-02-20T11:15:00.000Z",
        "content": "è¿™ä¸ªäº§å“ç¡®å®ä¸é”™",
        "likes": 3
      }
    ]
  },
  "message": "è¯¦æƒ…é¡µæ•°æ®è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 2. è·å–äº§å“æ•°æ®
è·å–ç‰¹å®šåˆ†ç±»ä¸‹çš„äº§å“æ•°æ®ã€‚

**ç«¯ç‚¹**: `GET /api/products`

**è¯·æ±‚å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `level1` | string | æ˜¯ | ä¸€çº§åˆ†ç±»åç§° |
| `level2` | string | æ˜¯ | äºŒçº§åˆ†ç±»åç§° |
| `level3` | string | æ˜¯ | ä¸‰çº§åˆ†ç±»åç§° |
| `limit` | number | å¦ | è¿”å›æ•°é‡ï¼Œé»˜è®¤9 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "products": [
      {
        "id": 1,
        "product_name": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€ ä½³æ´å£«æ¬¾",
        "brand_name": "ä½³æ´å£«",
        "price": "12.50",
        "confidence_score": 89,
        "selection_reason": "åŸºäºç”¨æˆ·è¯„ä»·ã€äº§å“è´¨é‡å’Œæ€§ä»·æ¯”ç»¼åˆè¯„é€‰"
      }
    ],
    "total": 1
  },
  "message": "äº§å“æ•°æ®è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

## ğŸ‘ æŠ•ç¥¨åŠŸèƒ½API

### 1. æäº¤æŠ•ç¥¨
æäº¤ç‚¹èµæˆ–ç‚¹è¸©æŠ•ç¥¨ã€‚

**ç«¯ç‚¹**: `POST /api/vote`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "productKey": "product_1_1",
  "vote": "like"  // æˆ– "dislike"
}
```

**å‚æ•°è¯´æ˜**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `productKey` | string | æ˜¯ | äº§å“å”¯ä¸€æ ‡è¯†ç¬¦ |
| `vote` | string | æ˜¯ | æŠ•ç¥¨ç±»å‹ï¼šlike/dislike |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "productKey": "product_1_1",
    "vote": "like",
    "likes": 1,
    "dislikes": 0,
    "userVote": "like"
  },
  "message": "æŠ•ç¥¨æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 2. å–æ¶ˆæŠ•ç¥¨
å–æ¶ˆå·²æäº¤çš„æŠ•ç¥¨ã€‚

**ç«¯ç‚¹**: `POST /api/vote/cancel`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "productKey": "product_1_1"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "productKey": "product_1_1",
    "likes": 0,
    "dislikes": 0,
    "userVote": null
  },
  "message": "æŠ•ç¥¨å·²å–æ¶ˆ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 3. è·å–æŠ•ç¥¨çŠ¶æ€
è·å–äº§å“çš„æŠ•ç¥¨çŠ¶æ€ã€‚

**ç«¯ç‚¹**: `GET /api/vote/:productKey`

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `productKey` | string | æ˜¯ | äº§å“å”¯ä¸€æ ‡è¯†ç¬¦ |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "productKey": "product_1_1",
    "likes": 5,
    "dislikes": 2,
    "total": 7
  },
  "message": "æŠ•ç¥¨çŠ¶æ€è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

## ğŸ’¬ è¯„è®ºåŠŸèƒ½API

### 1. æäº¤è¯„è®º
æäº¤æ–°çš„è¯„è®ºã€‚

**ç«¯ç‚¹**: `POST /api/comment`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "level1": "ä¸ªæŠ¤å¥åº·",
  "level2": "å‰ƒé¡»ç”¨å“",
  "level3": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€",
  "content": "è¿™ä¸ªäº§å“ç¡®å®ä¸é”™ï¼Œæ€§ä»·æ¯”å¾ˆé«˜",
  "user": "åŒ¿åç”¨æˆ·"  // å¯é€‰ï¼Œé»˜è®¤"åŒ¿åç”¨æˆ·"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "id": "comment_123456",
    "level1": "ä¸ªæŠ¤å¥åº·",
    "level2": "å‰ƒé¡»ç”¨å“",
    "level3": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€",
    "content": "è¿™ä¸ªäº§å“ç¡®å®ä¸é”™ï¼Œæ€§ä»·æ¯”å¾ˆé«˜",
    "user": "åŒ¿åç”¨æˆ·",
    "timestamp": "2026-02-20T11:17:00.000Z",
    "likes": 0
  },
  "message": "è¯„è®ºå‘è¡¨æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 2. è·å–è¯„è®ºåˆ—è¡¨
è·å–ç‰¹å®šåˆ†ç±»çš„è¯„è®ºåˆ—è¡¨ã€‚

**ç«¯ç‚¹**: `GET /api/comments`

**è¯·æ±‚å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `level1` | string | æ˜¯ | ä¸€çº§åˆ†ç±»åç§° |
| `level2` | string | æ˜¯ | äºŒçº§åˆ†ç±»åç§° |
| `level3` | string | æ˜¯ | ä¸‰çº§åˆ†ç±»åç§° |
| `limit` | number | å¦ | è¿”å›æ•°é‡ï¼Œé»˜è®¤50 |
| `offset` | number | å¦ | åç§»é‡ï¼Œé»˜è®¤0 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "comments": [
      {
        "id": "comment_123",
        "user": "åŒ¿åç”¨æˆ·",
        "timestamp": "2026-02-20T11:15:00.000Z",
        "content": "è¿™ä¸ªäº§å“ç¡®å®ä¸é”™",
        "likes": 3
      }
    ],
    "total": 1,
    "hasMore": false
  },
  "message": "è¯„è®ºåˆ—è¡¨è·å–æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 3. ä¸ºè¯„è®ºç‚¹èµ
ä¸ºè¯„è®ºç‚¹èµã€‚

**ç«¯ç‚¹**: `POST /api/comment/like`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚ä½“**:
```json
{
  "commentId": "comment_123"
}
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "commentId": "comment_123",
    "likes": 4
  },
  "message": "è¯„è®ºç‚¹èµæˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

### 4. åˆ é™¤è¯„è®º
åˆ é™¤è¯„è®ºï¼ˆéœ€è¦æƒé™ï¼‰ã€‚

**ç«¯ç‚¹**: `DELETE /api/comment/:commentId`

**è·¯å¾„å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `commentId` | string | æ˜¯ | è¯„è®ºID |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "commentId": "comment_123",
    "deleted": true
  },
  "message": "è¯„è®ºåˆ é™¤æˆåŠŸ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

## ğŸ” æœç´¢åŠŸèƒ½API

### 1. é«˜çº§æœç´¢
é«˜çº§æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒå¤šæ¡ä»¶ç­›é€‰ã€‚

**ç«¯ç‚¹**: `GET /api/search/advanced`

**è¯·æ±‚å‚æ•°**:
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `q` | string | å¦ | æœç´¢å…³é”®è¯ |
| `level1` | string | å¦ | ä¸€çº§åˆ†ç±»ç­›é€‰ |
| `level2` | string | å¦ | äºŒçº§åˆ†ç±»ç­›é€‰ |
| `minPrice` | number | å¦ | æœ€ä½ä»·æ ¼ |
| `maxPrice` | number | å¦ | æœ€é«˜ä»·æ ¼ |
| `minScore` | number | å¦ | æœ€ä½è¯„åˆ† |
| `brand` | string | å¦ | å“ç‰Œç­›é€‰ |
| `sortBy` | string | å¦ | æ’åºå­—æ®µï¼šprice/score/name |
| `sortOrder` | string | å¦ | æ’åºé¡ºåºï¼šasc/desc |
| `page` | number | å¦ | é¡µç ï¼Œé»˜è®¤1 |
| `limit` | number | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤20 |

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "data": {
    "query": {
      "q": "å‰ƒé¡»",
      "level1": "ä¸ªæŠ¤å¥åº·",
      "minScore": 80
    },
    "results": [
      {
        "level1": "ä¸ªæŠ¤å¥åº·",
        "level2": "å‰ƒé¡»ç”¨å“",
        "level3": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€",
        "products": [
          {
            "product_name": "ä¸€æ¬¡æ€§å‰ƒé¡»åˆ€ ä½³æ´å£«æ¬¾",
            "brand_name": "ä½³æ´å£«",
            "price": "12.50",
            "confidence_score": 89
          }
        ]
      }
    ],
    "pagination": {
      "total": 15,
      "page": 1,
      "limit": 20,
      "pages": 1
    }
  },
  "message": "æœç´¢å®Œæˆ",
  "timestamp": "2026-02-20T11:17:00.000Z"
}
```

## ğŸ“ˆ åˆ†æç»Ÿè®¡API

### 1. è·å–åˆ†ç±»ç»Ÿè®¡
è·å–åˆ†ç±»çš„è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯ã€‚

**ç«¯ç‚¹**: `GET /api/analytics/categories`

**